<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Add Property - Propmanage Hub</title>
  <link rel="stylesheet" type="text/css" href="D:\MCA\DDU\SEM1\WEB DESIGNING\TermWork\HET\css\add.css">
</head>

<body>
  <header>
    <h1>Propmanage Hub</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="property_sell.html">Property Sell</a>
      <a href="property_rent.html">Property Rent</a>
      <a href="add.html">Add</a>
      <a href="contact.html">Contact</a>
      <a href="about.html">About US</a>
      <a href="register.html" id="register-link">Register</a>
      <a href="login.html" id="login-logout">Login</a>
    </nav>
  </header>

  <main>
    <section id="add-property">
      <h2>Add Property</h2>

      <form id="property-form">
        <label for="image">Property Image:</label>
        <input type="file" name="image" id="image">

        <label for="address">Full Address:</label>
        <input type="text" name="address" id="address">

        <label for="contact_number">Contact Number:</label>
        <input type="text" name="contact_number" id="contact_number">

        <label for="email">Email:</label>
        <input type="email" name="email" id="email">

        <label for="type">Type:</label>
        <select name="type" id="type">
          <option value="sell">Sell</option>
          <option value="rent">Rent</option>
        </select>

        <input type="submit" value="Add Property">
      </form>
    </section>
  </main>

  <footer>
    <p>Propmanage Hub Â© 2023</p>
  </footer>

  <script>
    // Check if the user is logged in

    const loggedInUser = localStorage.getItem('loggedInUser');
    const loginLogoutButton = document.getElementById('login-logout');
    const registerLink = document.getElementById('register-link');

    if (loggedInUser) {
      // If user data exists, change Login to Logout
      loginLogoutButton.textContent = 'Logout';
      registerLink.style.display = 'none'; // Hide the Register link
    } else {
      // If user data doesn't exist, keep Login button and show Register link
      loginLogoutButton.textContent = 'Login';
      registerLink.style.display = 'a';
    }

    // Add event listener for Login/Logout functionality
    loginLogoutButton.addEventListener('click', function () {
      if (loggedInUser) {
        // If logged in, clear localStorage (logout)
        localStorage.removeItem('loggedInUser');
        window.location.href = 'index.html'; // Redirect to homepage after logout
      } else {
        // Redirect to the login page if not logged in (optional)
        window.location.href = 'login.html';
      }
    });


    if (!loggedInUser) {
      // Display an alert and redirect the user to the login page
      alert('Please login first.');
      window.location.href = 'login.html';
    }

    // Add event listener to the form
    const form = document.getElementById('property-form');

    form.addEventListener('submit', (event) => {
      event.preventDefault();

      // Get the form data
      const image = document.getElementById('image').files[0];
      const address = document.getElementById('address').value;
      const contact_number = document.getElementById('contact_number').value;
      const email = document.getElementById('email').value;
      const type = document.getElementById('type').value;

      // Validate the form data
      if (!image || !address || !contact_number || !email || !type) {
        alert('Please fill in all the fields.');
        return;
      }

      else {
        alert('Property added successfully.');
        window.location.href = 'index.html';
      }


    });
  </script>
</body>

</html>